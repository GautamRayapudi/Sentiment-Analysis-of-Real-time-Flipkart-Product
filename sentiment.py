import numpy as np
import pandas as pd
import re
import emoji
from textblob import TextBlob
import nltk
from nltk.tokenize import word_tokenize,sent_tokenize
nltk.download('punkt')
from nltk.corpus import stopwords
nltk.download('stopwords')
nltk.download('wordnet')
nltk.download('vader_lexicon')
from nltk.stem import WordNetLemmatizer
from sklearn.feature_extraction.text import CountVectorizer
from wordcloud import WordCloud
from sklearn.model_selection import train_test_split
from sklearn.naive_bayes import GaussianNB
from sklearn.naive_bayes import MultinomialNB
from sklearn.pipeline import Pipeline
from nltk.sentiment.vader import SentimentIntensityAnalyzer
from sklearn.metrics import accuracy_score,f1_score
import streamlit as st
import pickle
result = None

st.title("Sentiment Analysis on User Reviews using ML")
text = st.text_input("Enter the Review")
import os

current_dir = os.path.dirname(__file__)

pickle_file_path = os.path.join(current_dir, "sentiment_yonex.pkl")

with open(pickle_file_path, "rb") as f:
    model = pickle.load(f)
if st.button("Submit")==True:
    result = model.predict([text])[0]

if result == 'Positive':
    st.caption(':green[Positive]')
    st.image("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRSTH32czn83vjx3z0LeXRHgWRAG5vzrS1zmQ&s")
elif result == 'Negative':
    st.caption(':red[Negative]')
    st.image("data:image/jpeg;base64,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")
